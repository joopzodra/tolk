!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},zUnb:function(n,i,a){"use strict";a.r(i);var u,l,b,h,g,d,p,f,v=a("fXoL"),m=a("jhN1"),S=a("3Pt+"),E=a("1kSV"),k=a("xgIS"),y=a("l5mm"),D=a("VRyK"),w=a("yuhW"),I=a("JX91"),O=a("XNiG"),A=a("2Vo4"),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=c(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).version(1).stores({glossery:"id++, lang1, lang2, sheetName"}),i.glossery=i.table("glossery"),i}return n}(a("Texg").a),L=((u=function(){function e(){r(this,e),this.dialog=new O.a,this.dialogStream=this.dialog.asObservable()}return o(e,[{key:"emitMessage",value:function(e,t,n){this.dialog.next({type:e,body:t,time:n})}}]),e}()).\u0275fac=function(e){return new(e||u)},u.\u0275prov=v.vb({token:u,factory:u.\u0275fac,providedIn:"root"}),u),N={NO_GAPI_LOADED:"Het lukt niet om verbinding te maken met Google.",TRY_LOAD_GAPI:"Probeer opnieuw",NOT_SIGNED_IN:"Niet bij Google ingelogd",SIGNED_IN_AS:"Bij Google ingelogd als:",LOGIN_CANCELLED:"Inloggen is afgebroken",LOGOUT_CANCELLED:"Uitloggen is afgebroken",ENABLE_SHEET_LOADING:"Sheet laden",LOAD_SHEET:"Laden",INCORRECT_SPREADSHEET_URL:"Geen spreadsheet gevonden bij deze url.",NO_SPREADSHEET_ID:"De url bevat geen geldige spreadsheet id.",SPREADSHEET_REQUIRES_AUTORIZATION:"Deze spreadsheet is niet publiek. Je moet inloggen bij Google met het account voor deze sheet.",SHEETS_LOADING_ERROR:"Het lukt niet om Google Sheets binnen te halen.",SHEETS_LOADING_SUCCESS:"Je Google sheet is opgeslagen in Tolk",UPLOAD_SUCCESS_AT:"Ge\xfcpload op",UPLOAD_ERROR_AT:"Mislukte upload poging op",NO_SPREADSHEET_TITLE:"Geen sheet",COLUMN:"kolom",SEARCH_LANGUAGE:"Zoek in",SHEETS:"Sheets",ALL_SHEETS:"Alle sheets",GOOGLE_SHEETS_URL:"Geef spreadsheet url op ...",SIGN_IN:"Inloggen",SIGN_OUT:"Uitloggen",DATABASE_EMPTY:"De app heeft geen data. Je moet een spreadsheet laden.",DATABASE_CLOSED_ERROR:"De app heeft geen data. Je moet een spreadsheet laden.",DATABASE_INVALID_STATE_ERROR:"Je hebt browser gegevens gewist. Ververs eerst de pagina of sluit de app en open hem opnieuw. Daarna kun je weer sheets uploaden.",SEARCH_FOR:"Zoek ...",NO_SEARCHRESULTS:"Geen resultaat gevonden bij je zoekterm.",SEARCH_BY_BEGINNING_OF_WORD:"Woord begint met zoekterm",SERVICE_WORKER_UPDATE_AVAILABLE:"Er is een update van Tolk beschikbaar. Sluit de app en open hem opnieuw.",SERVICE_WORKER_UPDATE_ACTIVATED:"Tolk is ge-update."},T=((h=function(){function n(e){var t=this;r(this,n),this.dialogService=e,this.sheetMeta=new O.a,this.selection=new O.a,this.searching=new A.a(!1),this.sheetMetaStream=this.sheetMeta.asObservable(),this.selectionStream=this.selection.asObservable(),this.searchingStream=this.searching.asObservable(),this.db=new _("TolkDatabase"),window.onunhandledrejection=function(e){switch(e.preventDefault(),e.reason.name){case"DatabaseClosedError":t.dialogService.emitMessage("warning",N.DATABASE_CLOSED_ERROR,1e4);break;case"InvalidStateError":t.dialogService.emitMessage("warning",N.DATABASE_INVALID_STATE_ERROR,1e4);break;default:t.dialogService.emitMessage("danger",e.reason.message,1e4)}}}return o(n,[{key:"clearTableAndAddNewSheet",value:function(e,t,n,i){var a=this,o=this.prepareValues(e);return this.db.transaction("rw",this.db.glossery,function(){a.db.glossery.clear(),a.db.glossery.bulkAdd(o)}).then(function(e){return localStorage.setItem("spreadsheetTitle",t),localStorage.setItem("columnNames",JSON.stringify(n)),localStorage.setItem("sheetNames",JSON.stringify(i)),a.sheetMeta.next({spreadsheetTitle:t,columnNames:n,sheetNames:i}),e})}},{key:"prepareValues",value:function(e){var n;return(n=[]).concat.apply(n,t(e.map(function(e){return e.values.map(function(t){return function(e,t){return{lang1:t[0],lang2:t[1],sheetName:e.sheetName}}(e,t)})})))}},{key:"select",value:function(t,n,i,a){var o=this;if(this.searching.next(!0),this.db.glossery.count().then(function(e){return 0!==e||o.dialogService.emitMessage("warning",N.DATABASE_EMPTY,8e3)}),""===t)return this.selection.next({searchTerm:t,items:[]}),void this.searching.next(!1);var r,s=(r=function(e){if(a){var i=t.toLowerCase();return e.filter(function(e){return e[n]&&e[n].normalize("NFD").replace(/[\u0300-\u036f]/g,"").startsWith(i)})}var o=t.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(o,"i");return e.filter(function(e){return e[n]&&r.test(e[n].normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())})}(this.db.glossery),i?r.and(function(e){return e.sheetName===i}):r),c=s.count(),u=s.toArray().then(function(e){var n=e.map(function(e){return{lang1:e.lang1,lang2:e.lang2}});return{searchTerm:t,items:n,byBegin:a}});Promise.all([c,u]).then(function(t){var n=e(t,2),i=n[0],a=n[1];a.count=i,o.selection.next(a),o.searching.next(!1)}).catch(function(){return o.searching.next(!1)})}}]),n}()).\u0275fac=function(e){return new(e||h)(v.Lb(L))},h.\u0275prov=v.vb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),C=((b=function(){function e(t){r(this,e),this.dialogService=t,this.username=new A.a(void 0),this.usernameStream=this.username.asObservable()}return o(e,[{key:"onGapiAuth2Init",value:function(){gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus.bind(this));var e=gapi.auth2.getAuthInstance().isSignedIn.get();this.updateSigninStatus(e)}},{key:"updateSigninStatus",value:function(e){var t=e?gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getName():void 0;this.username.next(t)}},{key:"signIn",value:function(){var e=this;gapi.auth2.getAuthInstance().signIn().catch(function(t){return e.dialogService.emitMessage("warning",N.LOGIN_CANCELLED,5e3)})}},{key:"signOut",value:function(){var e=this;gapi.auth2.getAuthInstance().signOut().catch(function(t){return e.dialogService.emitMessage("warning",N.LOGOUT_CANCELLED,5e3)})}}]),e}()).\u0275fac=function(e){return new(e||b)(v.Lb(L))},b.\u0275prov=v.vb({token:b,factory:b.\u0275fac,providedIn:"root"}),b),M=((l=function(){function e(t){r(this,e),this.authService=t,this.discoveryDocs=["https://sheets.googleapis.com/$discovery/rest?version=v4"],this.clientId="219713688448-mfafknmuknff8ai6ua1eg57ncigbqrt4.apps.googleusercontent.com",this.scopes="https://www.googleapis.com/auth/spreadsheets",this.gapiUrl="https://apis.google.com/js/api.js",this.gapiStatus=new A.a(""),this.gapiStatusStream=this.gapiStatus.asObservable(),navigator.onLine?this.loadGapi():this.gapiStatus.next("offline"),window.addEventListener("offline",this.onOffline.bind(this)),window.addEventListener("online",this.onOnline.bind(this))}return o(e,[{key:"reloadGapi",value:function(){this.removeGapiScript(),this.loadGapi()}},{key:"loadGapi",value:function(){this.gapiStatus.next("loading");var e=this.gapiUrl,t=document.head,n=document.createElement("script");n.src=e,n.id="gapi-script",n.onload=this.loadGapiClientAndAuth2.bind(this),n.onerror=this.gapiLoadError.bind(this),t.appendChild(n)}},{key:"loadGapiClientAndAuth2",value:function(){gapi.load("client:auth2",this.initGapiClient.bind(this))}},{key:"initGapiClient",value:function(){var e=this;gapi.client.init({apiKey:"AIzaSyDY3qsYVEpvv1M7ha55H6KDVnxaMzBn4jo",discoveryDocs:this.discoveryDocs,clientId:this.clientId,scope:this.scopes}).then(function(){e.gapiStatus.next("loaded"),e.authService.onGapiAuth2Init()}).catch(function(){return e.gapiLoadError()})}},{key:"gapiLoadError",value:function(){this.gapiStatus.next("error"),this.removeGapiScript()}},{key:"removeGapiScript",value:function(){var e=document.querySelector("#gapi-script");e&&e.parentElement.removeChild(e)}},{key:"onOffline",value:function(){this.gapiStatus.next("offline")}},{key:"onOnline",value:function(){var e=document.querySelector("#gapi-script");e?e.getAttribute("gapi_processed")?this.gapiStatus.next("loaded"):(e.parentElement.removeChild(e),this.loadGapi()):this.loadGapi()}}]),e}()).\u0275fac=function(e){return new(e||l)(v.Lb(C))},l.\u0275prov=v.vb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),j=a("Jho9"),x=((f=function e(t,n){var i=this;r(this,e),this.updates=t,this.dialogService=n,t.available.subscribe(function(e){i.dialogService.emitMessage("success",N.SERVICE_WORKER_UPDATE_AVAILABLE,1e4)}),t.activated.subscribe(function(e){i.dialogService.emitMessage("success",N.SERVICE_WORKER_UPDATE_ACTIVATED,4e3)})}).\u0275fac=function(e){return new(e||f)(v.Lb(j.b),v.Lb(L))},f.\u0275prov=v.vb({token:f,factory:f.\u0275fac,providedIn:"root"}),f),R=((p=function(){function e(t,n){r(this,e),this.databaseService=t,this.changeDetector=n,this.spreadSheetTitle="",this.showInfoModalEvent=new v.k}return o(e,[{key:"ngOnInit",value:function(){var e=this,t=localStorage.getItem("spreadsheetTitle");this.spreadSheetTitle=t||N.NO_SPREADSHEET_TITLE,this.databaseService.sheetMetaStream.subscribe(function(t){e.spreadSheetTitle=t.spreadsheetTitle,e.changeDetector.detectChanges()})}},{key:"showInfoModal",value:function(){this.showInfoModalEvent.emit(Math.random())}},{key:"ngOnDestroy",value:function(){this.sheetMetaSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||p)(v.zb(T),v.zb(v.f))},p.\u0275cmp=v.tb({type:p,selectors:[["tolk-header"]],outputs:{showInfoModalEvent:"showInfoModalEvent"},decls:7,vars:1,consts:[[1,"container","bg-secondary","text-white","py-1",2,"font-size","16px","background-color","#AC636C !important"],["id","show-info-modal",1,"btn","btn-link","btn-sm","float-right",3,"click"],["src","assets/img/info-icon.svg","alt","info-icon"],[1,"container","font-weight-light","text-muted","my-4",2,"font-size","20px"]],template:function(e,t){1&e&&(v.Eb(0,"div"),v.Eb(1,"h1",0),v.kc(2,"tolk "),v.Eb(3,"button",1),v.Ob("click",function(){return t.showInfoModal()}),v.Ab(4,"img",2),v.Db(),v.Db(),v.Eb(5,"h2",3),v.kc(6),v.Db(),v.Db()),2&e&&(v.nb(6),v.mc(" ",t.spreadSheetTitle," "))},styles:["#show-info-modal[_ngcontent-%COMP%] {\n      margin-top: -8px;\n    }"],changeDetection:0}),p),G=((d=function e(t){r(this,e),this.activeModal=t}).\u0275fac=function(e){return new(e||d)(v.zb(E.a))},d.\u0275cmp=v.tb({type:d,selectors:[["tolk-info-modal-content"]],decls:38,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["href","https://docs.google.com/spreadsheets"],["href","privacy/index.html"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(v.Eb(0,"div",0),v.Eb(1,"h4",1),v.kc(2,"Tolk"),v.Db(),v.Eb(3,"button",2),v.Ob("click",function(){return t.activeModal.close()}),v.Eb(4,"span",3),v.kc(5,"\xd7"),v.Db(),v.Db(),v.Db(),v.Eb(6,"div",4),v.Eb(7,"small"),v.Eb(8,"p"),v.kc(9,"Hier kan info over Tolk komen. Zoals:"),v.Db(),v.Eb(10,"p"),v.kc(11,"In Tolk kun je een spreadsheet uit Google sheets laden. Wil je een Excel spreadsheet gebruiken? Upload eerst je moet uploaden naar Google Sheets. Ga naar "),v.Eb(12,"a",5),v.kc(13,"Google Sheets"),v.Db(),v.kc(14,", maak een nieuwe lege spreadsheet, en klik daarin op File > Import > Upload."),v.Db(),v.Eb(15,"p"),v.kc(16,"(NB. Wil je een Microsoft Excel of LibreOffice Calc document uit Google Drive gebruiken? Als je dat vanuit Drive opent, is het niet automatisch een Google Sheet. Pas als je er een Sheet van hebt gemaakt, is de url bruikbaar.)"),v.Db(),v.Eb(17,"p"),v.kc(18,"Tolk verwacht dat in je spreadsheet de vertalingen beginnen in de tweede rij. De eerste rij wordt dus niet gebruikt, behalve die van de eerste sheet! De eerste rij van eerste sheet benut voor taalkeuze knoppen."),v.Db(),v.Eb(19,"p"),v.kc(20,"Publieke sheets vs priv\xe9 sheets. Inloggen bij Google, etc..."),v.Db(),v.Eb(21,"p"),v.kc(22,"Bij een update van Tolk krijg je een melding. Als je Tolk in de browser gebruikt, ververs de pagina; dan is de app ge-update. Gebruik je Tolk als standalone app, sluit dan de app af en open hem opnieuw; dan is hij ge-update."),v.Db(),v.Eb(23,"p"),v.kc(24,"Als je inlogt met je Google account heeft Tolk toegang tot je Google gebruikersgegevens. Het enige wat Tolk daarmee doet is het weergeven van je naam onderaan het scherm. Je woordenlijst en data om de app goed te laten functioneren worden opgeslagen op je computer of smartphone. Verder doet Tolk niets met je gegevens en verstuurt helemaal niets vanaf je computer of smartphone naar een server. Om het inloggen bij Google mogelijk te maken moet Tolk een "),v.Eb(25,"a",6),v.kc(26,"privacyverklaring"),v.Db(),v.kc(27," hebben. Daarin wordt herhaald wat hierboven vermeld staat."),v.Db(),v.Eb(28,"strong"),v.Eb(29,"p"),v.kc(30,"Problemen?"),v.Db(),v.Db(),v.Eb(31,"p"),v.kc(32,"Lukt het niet om in te loggen bij Google?. Meestal ligt dat aan privacy beschermende browser extensies, zoals Privacy Badger of Ghostery. Kijk of het wel lukt als je die uitschakelt."),v.Db(),v.Eb(33,"p"),v.kc(34,"Is offline werken met de app is niet mogelijk? Als je in de browser hebt ingesteld dat cookies en websitegegevens verwijderd worden na het afsluiten van de browser, dan is offline werken niet mogelijk. Je zult dan je spreadsheet steeds opnieuw moeten laden in Tolk. Ook na het wissen van browsegegevens moet je je spreadsheet opnieuw laden."),v.Db(),v.Db(),v.Db(),v.Eb(35,"div",7),v.Eb(36,"button",8),v.Ob("click",function(){return t.activeModal.close()}),v.kc(37,"Sluit"),v.Db(),v.Db())},styles:[""]}),d),V=((g=function(){function e(t){r(this,e),this.modalService=t}return o(e,[{key:"ngOnChanges",value:function(e){e.showInfoModal.firstChange||this.modalService.open(G)}}]),e}()).\u0275fac=function(e){return new(e||g)(v.zb(E.k))},g.\u0275cmp=v.tb({type:g,selectors:[["tolk-info-modal"]],inputs:{showInfoModal:"showInfoModal"},features:[v.lb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),g),U=a("Kj3r"),P=a("itXk"),z=a("ofXK"),F=["dropdown"],H=["dropdownMenu"];function Q(e,t){if(1&e){var n=v.Fb();v.Eb(0,"button",22),v.Ob("click",function(){v.dc(n);var e=t.$implicit;return v.Qb(3).onSheetFilterClicked(e)}),v.kc(1),v.Db()}if(2&e){var i=t.$implicit;v.nb(1),v.lc(i)}}function B(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div",16),v.Eb(1,"div",17,18),v.Eb(3,"button",19),v.Ob("click",function(){return v.dc(n),v.Qb(2).toggleDropdown()}),v.kc(4),v.Db(),v.Eb(5,"div",20,21),v.Eb(7,"button",22),v.Ob("click",function(){v.dc(n);var e=v.Qb(2);return e.toggleDropdown(),e.onSheetFilterClicked("")}),v.kc(8),v.Db(),v.ic(9,Q,2,1,"button",23),v.Db(),v.Db(),v.Db()}if(2&e){var i=v.Qb(2);v.nb(4),v.lc(i.sheetFilterButtonText||i.nl.ALL_SHEETS),v.nb(4),v.lc(i.nl.ALL_SHEETS),v.nb(1),v.Vb("ngForOf",i.sheetNames)}}function J(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div",1),v.Eb(1,"div",2),v.Eb(2,"form",3),v.Eb(3,"div",4),v.Eb(4,"label",5),v.Ab(5,"input",6),v.kc(6),v.Db(),v.Eb(7,"label",5),v.Ab(8,"input",7),v.kc(9),v.Db(),v.Db(),v.Db(),v.ic(10,B,10,3,"div",8),v.Db(),v.Eb(11,"div",9),v.Ab(12,"input",10),v.Eb(13,"label",11),v.kc(14),v.Db(),v.Db(),v.Eb(15,"div",12),v.Ab(16,"input",13),v.Eb(17,"div",14),v.Eb(18,"span",15),v.Ob("click",function(){return v.dc(n),v.Qb().clearInput()}),v.kc(19,"\xd7"),v.Db(),v.Db(),v.Db(),v.Db()}if(2&e){var i=v.Qb();v.nb(2),v.Vb("formGroup",i.languageSelector),v.nb(4),v.mc("",i.columnNames[0]," "),v.nb(3),v.mc("",i.columnNames[1]," "),v.nb(1),v.Vb("ngIf",i.sheetNames.length>1),v.nb(2),v.Vb("formControl",i.searchByBegin),v.nb(2),v.lc(i.nl.SEARCH_BY_BEGINNING_OF_WORD),v.nb(2),v.Wb("placeholder",i.nl.SEARCH_FOR),v.Vb("formControl",i.search)}}var W,$=((W=function(){function t(e,n,i){r(this,t),this.changeDetector=e,this.databaseService=n,this.formBuilder=i,this.search=new S.d(""),this.searchByBegin=new S.d(!0),this.searchLanguageEvent=new v.k,this.columnNames=["",""],this.sheetNames=[],this.nl=N,this.sheetFilterButtonText="",this.initialLanguage="lang1",this.sheetFilterTextStream=new A.a(""),this.dropdownOpen=!1}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.columnNames=JSON.parse(localStorage.getItem("columnNames"))||this.columnNames,this.sheetNames=JSON.parse(localStorage.getItem("sheetNames"))||this.sheetNames,this.sheetMetaSubscription=this.databaseService.sheetMetaStream.subscribe(function(e){t.columnNames=e.columnNames,t.sheetNames=e.sheetNames,t.changeDetector.detectChanges()}),this.languageSelector=this.formBuilder.group({lang:this.initialLanguage});var n=this.search.valueChanges.pipe(Object(U.a)(250),Object(I.a)("")),i=this.languageSelector.get("lang").valueChanges.pipe(Object(I.a)(this.initialLanguage)),a=this.searchByBegin.valueChanges.pipe(Object(I.a)(!0));this.searchSubscription=Object(P.a)(n,i,this.sheetFilterTextStream,a).subscribe(function(n){var i=e(n,4),a=i[0],o=i[1],r=i[2],s=i[3];t.searchLanguageEvent.emit(o),t.databaseService.select(a,o,r,s)}),document.querySelector("body").addEventListener("click",this.closeDropdown.bind(this))}},{key:"clearInput",value:function(){this.search.reset("")}},{key:"toggleDropdown",value:function(){if(this.dropdownOpen)this.closeDropdown();else{this.dropdown.nativeElement.classList.add("dropdown-fix"),this.dropdownMenu.nativeElement.classList.add("dropdown-menu-fix");var e=this.dropdown.nativeElement.clientHeight;this.dropdownMenu.nativeElement.style.transform="translate(".concat(Math.round(this.dropdown.nativeElement.clientWidth-this.dropdownMenu.nativeElement.clientWidth),"px, ").concat(Math.round(e),"px)"),this.dropdownOpen=!0}}},{key:"closeDropdown",value:function(){this.dropdown&&(this.dropdown.nativeElement.classList.remove("dropdown-fix"),this.dropdownMenu.nativeElement.classList.remove("dropdown-menu-fix"),this.dropdownOpen=!1)}},{key:"onSheetFilterClicked",value:function(e){this.sheetFilterButtonText=e,this.sheetFilterTextStream.next(e)}},{key:"ngOnDestroy",value:function(){this.sheetMetaSubscription.unsubscribe(),this.searchSubscription.unsubscribe(),document.querySelector("body").removeEventListener("click",this.closeDropdown.bind(this))}}]),t}()).\u0275fac=function(e){return new(e||W)(v.zb(v.f),v.zb(T),v.zb(S.c))},W.\u0275cmp=v.tb({type:W,selectors:[["tolk-search"]],viewQuery:function(e,t){var n;1&e&&(v.oc(F,!0),v.oc(H,!0)),2&e&&(v.bc(n=v.Pb())&&(t.dropdown=n.first),v.bc(n=v.Pb())&&(t.dropdownMenu=n.first))},outputs:{searchLanguageEvent:"searchLanguageEvent"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-8","mb-1","pr-2",3,"formGroup"],["id","language-selector","ngbRadioGroup","","formControlName","lang",1,"btn-group","btn-group-toggle","w-100"],["ngbButtonLabel","",1,"btn-info","text-truncate"],["ngbButton","","type","radio","value","lang1"],["ngbButton","","type","radio","value","lang2"],["class","col-4",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","search-by-begin",1,"custom-control-input",3,"formControl"],["for","search-by-begin",1,"custom-control-label"],[1,"input-group","my-2"],["type","text",1,"form-control",3,"placeholder","formControl"],[1,"input-group-append"],["id","clear-search-input",1,"input-group-text",3,"click"],[1,"col-4"],["ngbDropdown","","placement","bottom-right",1,"d-inline-block","w-100"],["dropdown",""],["ngbDropdownToggle","",1,"btn","btn-outline-info","text-truncate","w-100",3,"click"],["ngbDropdownMenu","",1,"text-truncate"],["dropdownMenu",""],["ngbDropdownItem","",3,"click"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&v.ic(0,J,20,8,"div",0),2&e&&v.Vb("ngIf",t.columnNames[0]&&t.columnNames[1])},directives:[z.e,S.p,S.l,S.g,E.o,S.k,S.f,E.d,E.n,S.a,S.e,S.b,E.f,E.j,E.h,E.g,z.d],styles:[".dropdown-fix[_ngcontent-%COMP%] {\n      position: relative;\n    }\n    .dropdown-menu-fix[_ngcontent-%COMP%] {\n      display: block;\n      top: 0px;\n      left: 0px;\n      will-change: transform;\n      position: absolute;      \n    }\n    #clear-search-input[_ngcontent-%COMP%], #language-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n      cursor: pointer;\n    }"],changeDetection:0}),W);function K(e,t){if(1&e&&(v.Eb(0,"th",8),v.kc(1),v.Db()),2&e){var n=v.Qb(3);v.nb(1),v.lc(n.columnNames[0])}}function Y(e,t){if(1&e&&(v.Eb(0,"th",8),v.kc(1),v.Db()),2&e){var n=v.Qb(3);v.nb(1),v.lc(n.columnNames[0])}}function Z(e,t){if(1&e&&(v.Eb(0,"tr"),v.ic(1,K,2,1,"th",7),v.Eb(2,"th",8),v.kc(3),v.Db(),v.ic(4,Y,2,1,"th",7),v.Db()),2&e){var n=v.Qb(2);v.nb(1),v.Vb("ngIf","lang1"===n.searchLanguage),v.nb(2),v.lc(n.columnNames[1]),v.nb(1),v.Vb("ngIf","lang2"===n.searchLanguage)}}function q(e,t){if(1&e&&(v.Eb(0,"td"),v.kc(1),v.Db()),2&e){var n=v.Qb().$implicit;v.nb(1),v.lc(n.lang1)}}function X(e,t){if(1&e&&(v.Eb(0,"td"),v.kc(1),v.Db()),2&e){var n=v.Qb().$implicit;v.nb(1),v.lc(n.lang1)}}function ee(e,t){if(1&e&&(v.Eb(0,"tr"),v.ic(1,q,2,1,"td",4),v.Eb(2,"td"),v.kc(3),v.Db(),v.ic(4,X,2,1,"td",4),v.Db()),2&e){var n=t.$implicit,i=v.Qb(2);v.nb(1),v.Vb("ngIf","lang1"===i.searchLanguage),v.nb(2),v.lc(n.lang2),v.nb(1),v.Vb("ngIf","lang2"===i.searchLanguage)}}function te(e,t){if(1&e&&(v.Eb(0,"td",10),v.Eb(1,"small"),v.kc(2),v.Eb(3,"strong"),v.kc(4),v.Db(),v.kc(5,". Verfijn je zoekterm"),v.Db(),v.Db()),2&e){var n=v.Qb(3);v.nb(2),v.mc("Er zijn ",n.selection.count," termen die beginnen met "),v.nb(2),v.lc(n.selection.searchTerm)}}function ne(e,t){if(1&e&&(v.Eb(0,"td",10),v.Eb(1,"small"),v.kc(2),v.Eb(3,"strong"),v.kc(4),v.Db(),v.kc(5," erin. Verfijn je zoekterm"),v.Db(),v.Db()),2&e){var n=v.Qb(3);v.nb(2),v.mc("Er zijn ",n.selection.count," termen met "),v.nb(2),v.lc(n.selection.searchTerm)}}function ie(e,t){if(1&e&&(v.Eb(0,"tr"),v.ic(1,te,6,2,"td",9),v.ic(2,ne,6,2,"td",9),v.Db()),2&e){var n=v.Qb(2);v.nb(1),v.Vb("ngIf",n.selection.byBegin),v.nb(1),v.Vb("ngIf",!n.selection.byBegin)}}function ae(e,t){if(1&e&&(v.Eb(0,"tr",11),v.Eb(1,"td",12),v.kc(2),v.Db(),v.Db()),2&e){var n=v.Qb(2);v.nb(2),v.lc(n.nl.NO_SEARCHRESULTS)}}function oe(e,t){if(1&e&&(v.Eb(0,"table",3),v.Eb(1,"thead"),v.ic(2,Z,5,3,"tr",4),v.Db(),v.Eb(3,"tbody"),v.ic(4,ee,5,3,"tr",5),v.ic(5,ie,3,2,"tr",4),v.Db(),v.ic(6,ae,3,1,"tr",6),v.Db()),2&e){var n=v.Qb();v.nb(2),v.Vb("ngIf",n.selection.items.length),v.nb(2),v.Vb("ngForOf",n.selection.items),v.nb(1),v.Vb("ngIf",n.selection.items.length<n.selection.count),v.nb(1),v.Vb("ngIf",!n.selection.items.length&&""!==n.selection.searchTerm)}}function re(e,t){1&e&&(v.Eb(0,"div",13),v.Ab(1,"div",14),v.Db())}var se,ce=((se=function(){function e(t,n){r(this,e),this.changeDetector=t,this.databaseService=n,this.columnNames=["",""],this.nl=N,this.selection={searchTerm:"",items:[],count:0}}return o(e,[{key:"ngOnInit",value:function(){var e=this,t=JSON.parse(localStorage.getItem("columnNames"));t&&(this.columnNames=t),this.sheetMetaSubscription=this.databaseService.sheetMetaStream.subscribe(function(t){e.columnNames=t.columnNames,e.changeDetector.detectChanges()}),this.selectionSubscription=this.databaseService.selectionStream.subscribe(function(t){e.selection=t,e.changeDetector.detectChanges()}),this.searchingSubscription=this.databaseService.searchingStream.subscribe(function(t){e.searching=t,e.changeDetector.detectChanges()})}},{key:"ngOnDestroy",value:function(){this.sheetMetaSubscription.unsubscribe(),this.selectionSubscription.unsubscribe(),this.searchingSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||se)(v.zb(v.f),v.zb(T))},se.\u0275cmp=v.tb({type:se,selectors:[["tolk-display"]],inputs:{searchLanguage:"searchLanguage"},decls:3,vars:2,consts:[[1,"container","mt-3"],["class","table table-sm w-100 bg-white","style","table-layout: fixed;",4,"ngIf"],["id","display-spinner-container","class","bg-white",4,"ngIf"],[1,"table","table-sm","w-100","bg-white",2,"table-layout","fixed"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","d-block  w-100",4,"ngIf"],["class","text-truncate w-50",4,"ngIf"],[1,"text-truncate","w-50"],["colspan","2",4,"ngIf"],["colspan","2"],[1,"d-block","w-100"],[1,"d-block"],["id","display-spinner-container",1,"bg-white"],["id","display-spinner",1,"spinner"]],template:function(e,t){1&e&&(v.Eb(0,"div",0),v.ic(1,oe,7,4,"table",1),v.ic(2,re,2,0,"div",2),v.Db()),2&e&&(v.nb(1),v.Vb("ngIf",!t.searching),v.nb(1),v.Vb("ngIf",t.searching))},directives:[z.e,z.d],styles:["#display-spinner[_ngcontent-%COMP%] {\n      height: 25px;\n      width: 25px;\n      border-width: 4px;\n      margin: 3px auto;\n    }\n    #display-spinner-container[_ngcontent-%COMP%] {\n      height: 33px;\n      padding: 1px;\n    }"],changeDetection:0}),se),ue=a("LRne"),le=a("pLZG"),be=a("vkgz"),he=a("bOdf"),ge=a("3E0/");function de(e,t){if(1&e){var n=v.Fb();v.Eb(0,"ngb-alert",2),v.Ob("close",function(){v.dc(n);var e=t.$implicit;return v.Qb().clearMessage(e)}),v.kc(1),v.Db()}if(2&e){var i=t.$implicit,a=v.Qb();v.Wb("type",a.messages[i].type),v.nb(1),v.mc(" ",a.messages[i].body," ")}}var pe,fe,ve=((fe=function(){function e(t,n){r(this,e),this.errorService=t,this.changeDetector=n,this.keys=Object.keys,this.messages={},this.nl=N}return o(e,[{key:"ngOnInit",value:function(){var e=this,t=0;this.dialogSubscription=this.errorService.dialogStream.pipe(Object(le.a)(function(t){return e.isNewMessage(t)}),Object(be.a)(function(n){e.messages[++t]=n,e.changeDetector.detectChanges()}),Object(he.a)(function(e){return Object(ue.a)(t).pipe(Object(ge.a)(e.time))})).subscribe(function(t){delete e.messages[t],e.changeDetector.detectChanges()})}},{key:"clearMessage",value:function(e){delete this.messages[e],this.changeDetector.detectChanges()}},{key:"isNewMessage",value:function(e){return!Object.values(this.messages).some(function(t){return t.body===e.body})}},{key:"ngOnDestroy",value:function(){this.dialogSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||fe)(v.zb(L),v.zb(v.f))},fe.\u0275cmp=v.tb({type:fe,selectors:[["tolk-dialog"]],decls:2,vars:1,consts:[["id","dialog-container",1,"container"],[3,"type","close",4,"ngFor","ngForOf"],[3,"type","close"]],template:function(e,t){1&e&&(v.Eb(0,"div",0),v.ic(1,de,2,2,"ngb-alert",1),v.Db()),2&e&&(v.nb(1),v.Vb("ngForOf",t.keys(t.messages).reverse()))},directives:[z.d,E.b],encapsulation:2,changeDetection:0}),fe),me=((pe=function(){function e(t,n){r(this,e),this.databaseService=t,this.dialogService=n,this.spreadsheetTitle="",this.columnNames=["",""],this.sheetNames=[]}return o(e,[{key:"loadSheet",value:function(e){var t=this,n=this.extractId(e);return n?(this.saveUrl(e),gapi.client.sheets.spreadsheets.get({spreadsheetId:n}).then(function(e){return t.spreadsheetTitle=e.result.properties.title,e.result.sheets.map(function(e){return e.properties.title})}).then(function(e){return t.sheetNames=e,e.map(function(e){return e+"!A1:B"})}).then(function(e){return gapi.client.sheets.spreadsheets.values.batchGet({spreadsheetId:n,ranges:e})}).then(function(e){var n=e.result.valueRanges.filter(function(e){return e.values});n.length&&(t.columnNames=n[0].values.slice(0,1)[0]),t.columnNames=t.setColumnNames(t.columnNames),n.forEach(function(e){return e.values.shift()});var i=n.map(function(e){return{sheetName:e.range.split("!")[0],values:e.values}});return t.databaseService.clearTableAndAddNewSheet(i,t.spreadsheetTitle,t.columnNames,t.sheetNames)})):Promise.reject({status:"noId"})}},{key:"gapiExists",value:function(){return!!(gapi&&gapi.client&&gapi.client.sheets)||(this.dialogService.emitMessage("danger",N.NO_GAPI_LOADED,8e3),!1)}},{key:"extractId",value:function(e){if(0!==e.trim().length){var t=e.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/i);return t&&t[1]?t[1]:void 0}}},{key:"setColumnNames",value:function(e){return 0===e.length?[N.COLUMN+" A",N.COLUMN+" B"]:(1===e.length?[e[0].trim(),""]:e.map(function(e){return e.trim()})).map(function(e,t){return e||N.COLUMN+" "+["A","B"][t]})}},{key:"saveUrl",value:function(e){var t=JSON.parse(localStorage.getItem("spreadsheetUrls"))||[];t.push({url:e,uploadResult:""}),t.length>3&&t.shift(),localStorage.setItem("spreadsheetUrls",JSON.stringify(t))}},{key:"setUrlUploadResult",value:function(e,t){var n=JSON.parse(localStorage.getItem("spreadsheetUrls"));if(n){var i=new Date,a="success"===t?N.UPLOAD_SUCCESS_AT:N.UPLOAD_ERROR_AT;n.reverse(),n.find(function(t){return t.url=e}).uploadResult="".concat(a," ").concat(i.toLocaleDateString()," ").concat(i.toLocaleTimeString()),n.reverse(),localStorage.setItem("spreadsheetUrls",JSON.stringify(n))}}}]),e}()).\u0275fac=function(e){return new(e||pe)(v.Lb(T),v.Lb(L))},pe.\u0275prov=v.vb({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe);function Se(e,t){if(1&e){var n=v.Fb();v.Eb(0,"button",13),v.Ob("mousedown",function(){v.dc(n);var e=t.$implicit;return v.Qb(5).selectUrl(e.url)}),v.kc(1),v.Ab(2,"br"),v.Eb(3,"span"),v.Eb(4,"small"),v.Eb(5,"em"),v.kc(6),v.Db(),v.Db(),v.Db(),v.Db()}if(2&e){var i=t.$implicit;v.nb(1),v.lc(i.url),v.nb(5),v.lc(i.uploadResult)}}function Ee(e,t){if(1&e&&(v.Eb(0,"ul",11),v.ic(1,Se,7,2,"button",12),v.Db()),2&e){var n=v.Qb(4);v.nb(1),v.Vb("ngForOf",n.urlsList)}}function ke(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div"),v.Eb(1,"div"),v.ic(2,Ee,2,1,"ul",5),v.Db(),v.Eb(3,"div",6),v.Eb(4,"input",7),v.Ob("focus",function(){return v.dc(n),v.Qb(3).onInputFocus()})("focusout",function(){return v.dc(n),v.Qb(3).onInputFocusOut()}),v.Db(),v.Eb(5,"div",8),v.Eb(6,"button",9),v.Ob("click",function(){return v.dc(n),v.Qb(3).loadSheet()}),v.kc(7),v.Db(),v.Eb(8,"button",10),v.Ob("click",function(){return v.dc(n),v.Qb(3).disableSheetLoading()}),v.kc(9,"\xd7"),v.Db(),v.Db(),v.Db(),v.Db()}if(2&e){var i=v.Qb(3);v.nb(2),v.Vb("ngIf",i.urlsList.length),v.nb(2),v.Wb("placeholder",i.nl.GOOGLE_SHEETS_URL),v.Vb("formControl",i.urlInput),v.nb(3),v.lc(i.nl.LOAD_SHEET)}}function ye(e,t){1&e&&v.Ab(0,"div",14)}function De(e,t){if(1&e&&(v.Eb(0,"div"),v.ic(1,ke,10,4,"div",2),v.ic(2,ye,1,0,"div",4),v.Db()),2&e){var n=v.Qb(2);v.nb(1),v.Vb("ngIf",!n.sheetLoading),v.nb(1),v.Vb("ngIf",n.sheetLoading)}}function we(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div",15),v.Eb(1,"button",16),v.Ob("click",function(){return v.dc(n),v.Qb(2).enableSheetLoading()}),v.kc(2),v.Db(),v.Db()}if(2&e){var i=v.Qb(2);v.nb(2),v.lc(i.nl.ENABLE_SHEET_LOADING)}}function Ie(e,t){if(1&e&&(v.Eb(0,"div",1),v.ic(1,De,3,2,"div",2),v.ic(2,we,3,1,"div",3),v.Db()),2&e){var n=v.Qb();v.nb(1),v.Vb("ngIf",n.sheetLoadingEnabled),v.nb(1),v.Vb("ngIf",!n.sheetLoadingEnabled)}}var Oe,Ae=((Oe=function(){function e(t,n,i,a){r(this,e),this.changeDetector=t,this.sheetService=n,this.dialogService=i,this.gapiService=a,this.urlInput=new S.d(""),this.gapiStatus="",this.sheetLoading=!1,this.nl=N,this.urlsList=[],this.sheetLoadingEnabled=!1}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.gapiStatusSubscription=this.gapiService.gapiStatusStream.subscribe(function(t){e.gapiStatus=t,e.changeDetector.detectChanges()})}},{key:"loadSheet",value:function(){var e=this;""!==this.urlInput.value&&(this.sheetLoading=!0,this.changeDetector.detectChanges(),this.sheetService.loadSheet(this.urlInput.value).then(function(){e.sheetLoading=!1,e.sheetLoadingEnabled=!1,e.changeDetector.detectChanges(),e.dialogService.emitMessage("success",N.SHEETS_LOADING_SUCCESS,4e3),e.sheetService.setUrlUploadResult(e.urlInput.value,"success"),e.urlInput.setValue("")}).catch(function(t){if(e.sheetLoading=!1,e.changeDetector.detectChanges(),"InvalidStateError"!==t.name&&"DatabaseClosedError"!==t.name){switch(t.status){case 404:e.dialogService.emitMessage("danger",N.INCORRECT_SPREADSHEET_URL,8e3);break;case 403:e.dialogService.emitMessage("danger",N.SPREADSHEET_REQUIRES_AUTORIZATION,8e3);break;case"noId":e.dialogService.emitMessage("danger",N.NO_SPREADSHEET_ID,8e3);break;default:e.dialogService.emitMessage("danger",N.SHEETS_LOADING_ERROR,8e3)}e.sheetService.setUrlUploadResult(e.urlInput.value,"error")}else e.dialogService.emitMessage("danger",N.DATABASE_INVALID_STATE_ERROR,1e4)}))}},{key:"onInputFocus",value:function(){this.urlsList=JSON.parse(localStorage.getItem("spreadsheetUrls"))||[]}},{key:"onInputFocusOut",value:function(){this.urlsList=[]}},{key:"selectUrl",value:function(e){this.urlsList=[],this.urlInput.setValue(e)}},{key:"enableSheetLoading",value:function(){this.sheetLoadingEnabled=!0}},{key:"disableSheetLoading",value:function(){this.sheetLoadingEnabled=!1,this.urlInput.setValue("")}},{key:"ngOnDestroy",value:function(){this.gapiStatusSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Oe)(v.zb(v.f),v.zb(me),v.zb(L),v.zb(M))},Oe.\u0275cmp=v.tb({type:Oe,selectors:[["tolk-sheet"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngIf"],["id","enable-sheet-loading-button-container","class","container mb-3",4,"ngIf"],["class","spinner",4,"ngIf"],["class","list-group",4,"ngIf"],[1,"input-group","mb-3"],["type","text",1,"form-control",3,"placeholder","formControl","focus","focusout"],[1,"input-group-append"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"list-group"],["type","button","class","list-group-item list-group-item-action url-list-item",3,"mousedown",4,"ngFor","ngForOf"],["type","button",1,"list-group-item","list-group-item-action","url-list-item",3,"mousedown"],[1,"spinner"],["id","enable-sheet-loading-button-container",1,"container","mb-3"],["type","button",1,"btn","btn-outline-info","btn-sm",3,"click"]],template:function(e,t){1&e&&v.ic(0,Ie,3,2,"div",0),2&e&&v.Vb("ngIf","loaded"===t.gapiStatus)},directives:[z.e,S.b,S.k,S.e,z.d],styles:[".url-list-item[_ngcontent-%COMP%] {\n        word-break: break-word;\n        font-size: 0.8rem;\n      }\n      #enable-sheet-loading-button-container[_ngcontent-%COMP%] {\n        display: flex;\n        justify-content: flex-end;\n      }"],changeDetection:0}),Oe);function _e(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div",5),v.Eb(1,"div"),v.Eb(2,"span",6),v.kc(3),v.Db(),v.Eb(4,"button",7),v.Ob("click",function(){return v.dc(n),v.Qb(2).reloadGapi()}),v.kc(5),v.Db(),v.Db(),v.Db()}if(2&e){var i=v.Qb(2);v.nb(3),v.lc(i.nl.NO_GAPI_LOADED),v.nb(2),v.lc(i.nl.TRY_LOAD_GAPI)}}function Le(e,t){if(1&e&&(v.Eb(0,"div"),v.ic(1,_e,6,2,"div",4),v.Db()),2&e){var n=v.Qb();v.nb(1),v.Vb("ngIf","error"===n.gapiStatus)}}function Ne(e,t){1&e&&v.Ab(0,"div",8)}function Te(e,t){1&e&&(v.Eb(0,"h6",9),v.Eb(1,"span",10),v.kc(2,"Offline"),v.Db(),v.Db())}var Ce,Me=((Ce=function(){function e(t,n){r(this,e),this.changeDetector=t,this.gapiService=n,this.gapiStatus="",this.nl=N}return o(e,[{key:"ngOnInit",value:function(){var e,t=this;this.gapiStatusSubscription=this.gapiService.gapiStatusStream.subscribe(function(n){clearTimeout(e),t.gapiStatus=n,t.changeDetector.detectChanges(),"loading"===n&&(e=setTimeout(function(){t.gapiStatus="error",t.changeDetector.detectChanges()},5e3))})}},{key:"reloadGapi",value:function(){this.gapiService.reloadGapi()}},{key:"ngOnDestroy",value:function(){this.gapiStatusSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Ce)(v.zb(v.f),v.zb(M))},Ce.\u0275cmp=v.tb({type:Ce,selectors:[["tolk-gapi"]],decls:4,vars:3,consts:[["id","gapi-container"],[4,"ngIf"],["class","spinner",4,"ngIf"],["class","container my-3 text-center",4,"ngIf"],["class","container border-top py-2",4,"ngIf"],[1,"container","border-top","py-2"],[1,"message"],[1,"btn","btn-outline-info",3,"click"],[1,"spinner"],[1,"container","my-3","text-center"],[1,"badge","badge-info"]],template:function(e,t){1&e&&(v.Eb(0,"div",0),v.ic(1,Le,2,1,"div",1),v.ic(2,Ne,1,0,"div",2),v.ic(3,Te,3,0,"h6",3),v.Db()),2&e&&(v.nb(1),v.Vb("ngIf",t.gapiStatus),v.nb(1),v.Vb("ngIf","loading"===t.gapiStatus),v.nb(1),v.Vb("ngIf","offline"===t.gapiStatus))},directives:[z.e],styles:["span.message[_ngcontent-%COMP%] {\n      margin-right: 8px;\n    }"],changeDetection:0}),Ce);function je(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div",4),v.kc(1),v.Eb(2,"button",5),v.Ob("click",function(){return v.dc(n),v.Qb(2).onSignOut()}),v.kc(3),v.Db(),v.Db()}if(2&e){var i=v.Qb(2);v.nb(1),v.nc("",i.nl.SIGNED_IN_AS," ",i.username," "),v.nb(2),v.lc(i.nl.SIGN_OUT)}}function xe(e,t){if(1&e){var n=v.Fb();v.Eb(0,"div",4),v.kc(1),v.Eb(2,"button",6),v.Ob("click",function(){return v.dc(n),v.Qb(2).onSignIn()}),v.kc(3),v.Db(),v.Db()}if(2&e){var i=v.Qb(2);v.nb(1),v.mc("",i.nl.NOT_SIGNED_IN," "),v.nb(2),v.lc(i.nl.SIGN_IN)}}function Re(e,t){if(1&e&&(v.Eb(0,"div",1),v.Eb(1,"div",2),v.ic(2,je,4,3,"div",3),v.ic(3,xe,4,2,"div",3),v.Db(),v.Ab(4,"div"),v.Db()),2&e){var n=v.Qb();v.nb(2),v.Vb("ngIf",n.username),v.nb(1),v.Vb("ngIf",!n.username)}}var Ge,Ve=((Ge=function(){function e(t,n,i){r(this,e),this.gapiService=t,this.authService=n,this.changeDetector=i,this.gapiStatus="",this.nl=N}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.gapiStatusSubscription=this.gapiService.gapiStatusStream.subscribe(function(t){e.gapiStatus=t,e.changeDetector.detectChanges()}),this.userNameSubscription=this.authService.usernameStream.subscribe(function(t){e.username=t,e.changeDetector.detectChanges()})}},{key:"onSignIn",value:function(){this.authService.signIn()}},{key:"onSignOut",value:function(){this.authService.signOut()}},{key:"ngOnDestroy",value:function(){this.gapiStatusSubscription.unsubscribe(),this.userNameSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Ge)(v.zb(M),v.zb(C),v.zb(v.f))},Ge.\u0275cmp=v.tb({type:Ge,selectors:[["tolk-auth"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"container","py-2","border-top"],["class","d-flex justify-content-between align-items-center text-info","style","font-size: 14px;",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","text-info",2,"font-size","14px"],["id","signout-button",1,"btn","btn-outline-info","btn-sm",3,"click"],["id","authorize-button",1,"btn","btn-outline-info","btn-sm",3,"click"]],template:function(e,t){1&e&&v.ic(0,Re,5,2,"div",0),2&e&&v.Vb("ngIf","loaded"===t.gapiStatus)},directives:[z.e],encapsulation:2,changeDetection:0}),Ge),Ue=["topContainer"];function Pe(e,t){1&e&&(v.Eb(0,"div"),v.Ab(1,"tolk-sheet"),v.Ab(2,"tolk-gapi"),v.Ab(3,"tolk-auth"),v.Db())}var ze,Fe,He=function(e){return{"max-height":e}},Qe=((Fe=function(){function e(t,n,i,a){r(this,e),this.databaseService=t,this.gapiService=n,this.changeDetector=i,this.swUpdate=a,this.selectionSearchTerm="",this.gapiStatus=""}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.selectionStreamSubscription=this.databaseService.selectionStream.subscribe(function(t){e.selectionSearchTerm=t.searchTerm,e.changeDetector.detectChanges()}),this.gapiStatusSubscription=this.gapiService.gapiStatusStream.subscribe(function(t){e.gapiStatus=t,e.changeDetector.detectChanges()})}},{key:"ngAfterViewInit",value:function(){var e=this,t=Object(k.a)(window,"orientationchange"),n=Object(k.a)(window,"resize").pipe(Object(w.a)(function(e){return Object(y.a)(200)}),Object(I.a)(null));this.viewportChangeStreamSubscription=Object(D.a)(t,n).subscribe(function(){e.displayContainerMaxHeight=e.getDisplayContainerMaxHeight(),e.changeDetector.detectChanges()})}},{key:"getDisplayContainerMaxHeight",value:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)-this.topContainer.nativeElement.clientHeight-15}},{key:"onSearchLanguageEvent",value:function(e){this.searchLanguage=e}},{key:"onShowInfoModalEvent",value:function(e){this.showInfoModal=e}},{key:"ngOnDestroy",value:function(){this.selectionStreamSubscription.unsubscribe(),this.gapiStatusSubscription.unsubscribe(),this.viewportChangeStreamSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Fe)(v.zb(T),v.zb(M),v.zb(v.f),v.zb(x))},Fe.\u0275cmp=v.tb({type:Fe,selectors:[["tolk-root"]],viewQuery:function(e,t){var n;1&e&&v.oc(Ue,!0),2&e&&v.bc(n=v.Pb())&&(t.topContainer=n.first)},decls:11,vars:6,consts:[["id","app-container",1,"bg-light"],["id","top-container"],["topContainer",""],[3,"showInfoModalEvent"],[3,"showInfoModal"],[3,"searchLanguageEvent"],["id","display-container",3,"ngStyle"],[3,"searchLanguage"],["id","bottom-container"],[4,"ngIf"]],template:function(e,t){1&e&&(v.Eb(0,"div",0),v.Eb(1,"div",1,2),v.Eb(3,"tolk-header",3),v.Ob("showInfoModalEvent",function(e){return t.onShowInfoModalEvent(e)}),v.Db(),v.Ab(4,"tolk-info-modal",4),v.Eb(5,"tolk-search",5),v.Ob("searchLanguageEvent",function(e){return t.onSearchLanguageEvent(e)}),v.Db(),v.Db(),v.Eb(6,"div",6),v.Ab(7,"tolk-display",7),v.Db(),v.Eb(8,"div",8),v.Ab(9,"tolk-dialog"),v.ic(10,Pe,4,0,"div",9),v.Db(),v.Db()),2&e&&(v.nb(4),v.Vb("showInfoModal",t.showInfoModal),v.nb(2),v.Vb("ngStyle",v.Yb(4,He,t.displayContainerMaxHeight+"px")),v.nb(1),v.Vb("searchLanguage",t.searchLanguage),v.nb(3),v.Vb("ngIf",!t.selectionSearchTerm||"offline"===t.gapiStatus))},directives:[R,V,$,z.f,ce,ve,z.e,Ae,Me,Ve],styles:["#app-container[_ngcontent-%COMP%] {\n        height: 100vh;\n      }\n      #display-container[_ngcontent-%COMP%] {\n        overflow-y: scroll;\n      }\n      #bottom-container[_ngcontent-%COMP%] {\n        position: absolute;\n        bottom: 0;\n        width: 100%;\n        z-index: 2;\n      }\n      @media only screen and (max-height: 310px) {\n        #bottom-container[_ngcontent-%COMP%] {\n        display: none;\n        }\n      }"],changeDetection:0}),Fe),Be=((ze=function e(){r(this,e)}).\u0275mod=v.xb({type:ze,bootstrap:[Qe]}),ze.\u0275inj=v.wb({factory:function(e){return new(e||ze)},providers:[],imports:[[m.a,S.n,E.c,E.i,E.e,E.l,j.a.register("ngsw-worker.js",{enabled:!0}),E.m]]}),ze);Object(v.I)(),m.b().bootstrapModule(Be).catch(function(e){return console.error(e)})}},[[0,0,5]]])}();